experiment:
  name: mantra_cfa_prnu_hybrid
  seed: 42
  source_dataset: synthetic_splicing_demo
  methods:
    - mantra_only
    - cfa_only
    - mantra_cfa
    - mantra_cfa_prnu
    - mantra_cfa_prnu_ela_dwt_svd
  primary_method: mantra_cfa_prnu
  positive_label: 1
  test_size: 0.2
  val_size: 0.1
  image_size: [256, 256]
  n_jobs: 1

paths:
  dataset_root: data/raw/synthetic_splicing_demo
  manifest_csv: data/processed/synthetic_splicing_manifest.csv
  split_csv: data/splits/synthetic_splicing_split.csv
  artifacts_dir: artifacts
  models_dir: artifacts/models
  metrics_dir: artifacts/metrics
  reports_dir: artifacts/reports
  figures_dir: artifacts/figures
  logs_dir: artifacts/logs
  heatmap_dir: artifacts/figures/ela_heatmaps

features:
  ela:
    jpeg_quality: 90
    high_threshold: 35.0
    smooth_blur_kernel: 7
    save_heatmaps: true
    max_heatmaps_per_split: 10
  dwt:
    wavelet: haar
    level: 2
    top_k_singular: 10
  cfa:
    window_size: 7
    variance_threshold: 0.6
    smooth_sigma: 1.0
    save_maps: true
  prnu:
    wavelet: db4
    level: 2
    save_maps: true
  mantra:
    checkpoint_path: ""
    heuristic_sigma: 1.2
    high_threshold: 0.65
    top_k_percentile: 93.0
    save_masks: true

model:
  classifier:
    type: logistic_regression
    max_iter: 2500
    class_weight: balanced
    C: 1.0
    solver: lbfgs
  threshold_tuning:
    metric: f1
    min_threshold: 0.1
    max_threshold: 0.9
    steps: 81

evaluation:
  bootstrap_samples: 300
  confidence_level: 0.95

baseline:
  freeze_enabled: true
  snapshot_name: mantra-cfa-prnu-baseline

robustness:
  enabled: true
  scenarios:
    - name: jpeg_q85
      type: jpeg
      quality: 85
    - name: jpeg_q65
      type: jpeg
      quality: 65
    - name: resize_075
      type: resize
      scale: 0.75
    - name: blur_s1
      type: blur
      sigma: 1.0
    - name: noise_g5
      type: gaussian_noise
      std: 5.0
    - name: chain_j75_r075_b1_j85
      type: chained
      pipeline:
        - type: jpeg
          quality: 75
        - type: resize
          scale: 0.75
        - type: blur
          sigma: 1.0
        - type: jpeg
          quality: 85
